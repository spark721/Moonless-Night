<canvas id='ctx' width='1400' height='750' style='border:1px solid black'></canvas>

<!-- <script src="https://cdn.socket.io/socket.io-2.2.0.js"></script> -->
<script src="/socket.io/socket.io.js"></script>
<script>
  const ctx = document.getElementById('ctx').getContext('2d');
  ctx.font = '30px Arial';
  
  const socket = io();

  socket.on('pack', data => {
    ctx.clearRect(0,0,1400, 750);
    
    for (let i = 0; i < data.player.length; i++) {
      ctx.fillText(data.player[i].id, data.player[i].x, data.player[i].y) 
    }

    for (let i = 0; i < data.tree.length; i++) {
      ctx.beginPath();
      ctx.arc(data.tree[i].x, data.tree[i].y, data.tree[i].size, 0, 2 * Math.PI);
      ctx.stroke();
    }    
  })

  document.onkeydown = event => {
    if (event.keyCode === 68) socket.emit('keyPress', {inputId: 'right', state: true}); // d
    if (event.keyCode === 65) socket.emit('keyPress', {inputId: 'left', state: true}); // a
    if (event.keyCode === 87) socket.emit('keyPress', {inputId: 'up', state: true}); // w
    if (event.keyCode === 83) socket.emit('keyPress', {inputId: 'down', state: true}); // s
  }

  document.onkeyup = event => {
    if (event.keyCode === 68) socket.emit('keyPress', {inputId: 'right', state: false});
    if (event.keyCode === 65) socket.emit('keyPress', {inputId: 'left', state: false});
    if (event.keyCode === 87) socket.emit('keyPress', {inputId: 'up', state: false});
    if (event.keyCode === 83) socket.emit('keyPress', {inputId: 'down', state: false});
  }

</script>